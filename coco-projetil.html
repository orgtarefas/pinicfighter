<script>
// ================= MÓDULO: COCO PROJÉTIL =================
class CocoProjetil {
    constructor(x, y, direcao, cor, donoId) {
        this.x = x;
        this.y = y;
        this.direcao = direcao;
        this.cor = cor;
        this.donoId = donoId;
        this.velX = direcao * 8;
        this.velY = -15;
        this.raio = 12;
        this.ativo = true;
        this.tempoVida = 100;
    }
    
    atualizar() {
        if (!this.ativo) return;
        
        this.x += this.velX;
        this.y += this.velY;
        this.velY += CONFIG.GRAVIDADE;
        this.tempoVida--;
        
        if (this.x < 0 || this.x > 900 || this.y > CONFIG.CHAO + 50 || this.tempoVida <= 0) {
            this.ativo = false;
        }
    }
    
    desenhar(ctx) {
        if (!this.ativo) return;
        
        // Coco
        Utils.desenharCirculo(ctx, this.x, this.y, this.raio, this.cor);
        
        // Detalhes do cocô
        ctx.fillStyle = "#8B4513";
        Utils.desenharCirculo(ctx, this.x - 4, this.y - 3, 3, "#8B4513");
        Utils.desenharCirculo(ctx, this.x + 4, this.y, 3, "#8B4513");
        Utils.desenharCirculo(ctx, this.x, this.y + 4, 3, "#8B4513");
        
        // Trajetória
        ctx.strokeStyle = "rgba(255, 255, 0, 0.3)";
        ctx.lineWidth = 2;
        ctx.setLineDash([3, 3]);
        ctx.beginPath();
        ctx.moveTo(this.x, this.y);
        ctx.lineTo(this.x - this.velX * 2, this.y - this.velY * 2);
        ctx.stroke();
        ctx.setLineDash([]);
    }
    
    hitbox() {
        return {
            x: this.x - this.raio,
            y: this.y - this.raio,
            w: this.raio * 2,
            h: this.raio * 2
        };
    }
}
</script>